# Elemental Defense (TestWebGame)

**Elemental Defense**는 속성이 부여된 기하학적 아티팩트를 배치하여 끝없이 몰려오는 적들을 막아내는 전략형 타워 디펜스 게임입니다. 당신의 목표는 최적의 공간 활용과 속성 시너지를 통해 난공불락의 요새를 건설하는 것입니다.

## 🚀 게임 시스템 (Game Systems)

### 1. 그리드 및 배치 시스템 (Grid System)
게임의 핵심은 제한된 격자 공간(Grid)을 효율적으로 활용하는 것입니다.
- **도형 퍼즐 (Polyomino)**: 모든 아이템은 테트리스와 유사한 블록 형태(모노미노, 도미노, 트리미노 등)를 가집니다.
- **배치 규칙**: 아이템은 그리드 내 빈 공간에만 배치할 수 있으며, 기존 아이템과 겹칠 수 없습니다.
- **자유로운 조작**: 배치된 아이템은 언제든지 드래그하여 위치를 옮길 수 있으며, 우클릭으로 즉시 판매하여 자원을 회수할 수 있습니다.
- **스마트 자동 배치**: 상점에서 구매 시, 시스템이 자동으로 가장 적합한 빈 공간을 탐색하여 배치합니다.

### 2. 전투 메커니즘 (Combat System)
각 타워(아티팩트)는 고유한 공격 방식을 가지며, 상황에 맞춰 전략적으로 선택해야 합니다.
- **Normal (일반)**: 표준적인 단일 표적 투사체 공격.
- **Rapid (연사)**: 공격력은 낮지만 매우 빠른 속도로 적을 타격. (예: 뇌광의 세이버)
- **Laser (레이저)**: 지속적인 빔 공격으로 끊김 없는 피해를 입힙니다.
- **Nova (근거리 파동)**: 타워를 중심으로 원형 파동을 일으켜 주변의 **모든 적**을 동시에 공격합니다. (예: 혹한의 파동)
- **Bomb (원거리 폭격)**: 적에게 포탄을 발사하며, 착탄 지점에서 폭발하여 주변 적들에게 광역 피해를 줍니다. (예: 대지의 폭발)
- **Multi (다중 공격)**: 한 번에 여러 발의 투사체를 발사하여 다수의 적을 제압합니다. (예: 혼돈의 구슬 - 3발)
- **Chain (연쇄 공격)**: 적중 시 주변의 다른 적에게 튕기며 피해가 전이됩니다. (예: 심판의 프리즘 - 최대 3회)

### 3. 속성 시너지 (Synergies)
같은 속성을 가진 아티팩트를 **인접하게(상하좌우)** 배치하면 링크가 형성되고 시너지가 발동합니다.
*활성화 시 아이템 테두리에 하얀색 빛이 감돕니다.*

| 속성 | 이름 | 효과 (Effect) | 전략적 용도 |
|:---:|:---:|:---|:---|
| 🔥 | **Fire Power** | 공격력 **+20%** | 메인 딜러 타워의 화력 극대화 |
| ❄️ | **Ice Freeze** | 둔화율 **+25%** | 적의 진격을 늦추어 공격 기회 확보 |
| ⚡ | **Thunder Rapid** | 공속 **+30%** | 빠른 공격으로 다수의 적 처리 |
| 🌿 | **Leaf Regen** | 사거리 **+15%** | 더 넓은 범위를 커버하여 안정성 확보 |
| 💎 | **Gem Legend** | 치명타 **+10%** | 확률적 폭발 데미지로 보스 처리 |

---

## 💾 상세 설정 (Configuration)

### 몬스터 및 웨이브
- **웨이브 진행**: 시간이 지날수록 몬스터의 체력이 점진적으로 증가합니다. (HP Scaling)
- **몬스터 타입**:
  - `Normal`: 표준 이동 속도와 체력.
  - `Fast`: 체력은 적지만 이동 속도가 빠름.
  - `Tank`: 이동 속도는 느리지만 체력이 월등히 높음.
  - `Boss`: 매우 높은 체력과 크기를 가짐.

### 아이템 등급 및 형태
- **석판 (Base)**: 공격 기능은 없지만, 다른 타워들의 배치를 돕거나 그리드를 채우는 용도 (1칸 또는 2칸).
- **아티팩트 (Tower)**: 실제 공격을 수행하는 유닛 (주로 2칸 또는 3칸).
  - *밸런스*: 모든 타워는 공격력(`atk`), 사거리(`range`), 공격속도(`fireRate`)의 밸런스가 잡혀 있습니다.

---

## 🕹️ 조작법 (Controls)

| 동작 | 설명 |
|:---|:---|
| **좌클릭 (상점)** | 아이템 구매 및 자동 배치 |
| **드래그 (그리드)** | 배치된 아이템을 들어올려 이동 |
| **우클릭 (그리드)** | 아이템 판매 (삭제) |
| **마우스 오버** | 아이템의 상세 스탯(공격력, 사거리 등) 및 설명 확인 |

---

## 🛠️ 개발 및 아키텍처 (Dev Specs)

이 프로젝트는 유지보수성과 확장성을 위해 철저하게 모듈화되었습니다.

### 주요 시스템 모듈 (`js/systems/`)
1. **`GridSystem.js`**
   - 그리드 상태(`grid[][]`) 관리
   - 충돌 처리 및 배치 유효성 검사 (`canPlace`)
   - 시너지 계산 알고리즘 (`calculateSynergies`: BFS/Floyd-Warshall 변형)
   - 절차적 렌더링 (`renderProceduralShape`: 베벨, 코어 디자인)
2. **`TowerSystem.js`**
   - 전투 루프 (`update`)
   - 타겟팅 알고리즘 (`getNearestMonster`, `getMultipleMonsters`)
   - 공격 타입 별 로직 구현 (`fireProjectile`, `fireLaser`, `fireNova`, `fireBomb`, `fireChain`)
3. **`EnemySystem.js`**
   - 몬스터 스폰 및 풀링 (Pooling)
   - 길찾기 및 이동 로직
   - 체력 바 및 피격 판정
4. **`UIManager.js`**
   - HTML DOM 기반의 UI 업데이트
   - 상점 리스트 렌더링 및 미리보기(Preview) 생성
   - HUD 정보 동기화
5. **`InputSystem.js`**
   - 줌/팬 카메라 조작 및 전역 입력 이벤트 처리

### 데이터 관리
- `items.js`: 게임 내 등장하는 모든 아이템의 스탯과 형태 정의.
- `constants.js`: 게임 밸런스 상수, 색상 테마, 시너지 수치 정의.

---
*Created for the Web Game Project.*
