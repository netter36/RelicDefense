# 🎮 Relic Defense

**인벤토리 퍼즐 × 타워 디펜스**

속성이 부여된 유물(아티팩트)을 전략적으로 배치하여 끝없이 몰려오는 적들을 막아내는 전략형 타워 디펜스 게임입니다.

[![Play Now](https://img.shields.io/badge/🎮_Play_Now-GitHub_Pages-blue?style=for-the-badge)](https://netter36.github.io/RelicDefense/)

---

## 📋 목차

- [게임 개요](#-게임-개요)
- [핵심 시스템](#-핵심-시스템)
- [유물 도감](#-유물-도감)
- [몬스터 정보](#-몬스터-정보)
- [조작법](#️-조작법)
- [기술 스택](#️-기술-스택)

---

## 🎯 게임 개요

### 장르
**전략형 타워 디펜스 + 인벤토리 퍼즐**

### 핵심 메커니즘
1. **그리드 기반 배치**: 7×7 격자에 테트리스 스타일의 유물 배치
2. **속성 시너지**: 같은 속성을 인접 배치하여 강력한 보너스 획득
3. **다양한 공격 타입**: 7가지 고유한 공격 방식
4. **무한 난이도**: 시간이 지날수록 강해지는 적들

### 게임 목표
- 최적의 공간 활용과 속성 시너지를 통해 난공불락의 요새 건설
- 끝없이 몰려오는 몬스터 웨이브 생존
- 전략적 유물 배치로 최대 효율 달성

---

## 🔧 핵심 시스템

### 1. 그리드 & 배치 시스템

#### 그리드 사양
- **크기**: 7×7 (49칸)
- **슬롯 크기**: 70×70 픽셀
- **캔버스**: 650×650 픽셀

#### 배치 규칙
- **폴리오미노 형태**: 모든 유물은 테트리스와 유사한 블록 형태
  - 모노미노 (1칸): `■`
  - 도미노 (2칸): `■■` 또는 `■`<br>`■`
  - 트리미노 (3칸): `■■■` 또는 L자형
  - 테트로미노 (4칸): 정사각형 등
- **충돌 검사**: 기존 유물과 겹칠 수 없음
- **자유로운 재배치**: 드래그로 언제든지 위치 변경 가능
- **회전 기능**: R 키로 90도 회전 (형태에 따라 제한)
- **자동 배치**: 구매 시 빈 공간 자동 탐색

#### 스마트 배치 알고리즘
```javascript
// 좌상단부터 순차 탐색하여 첫 번째 가능한 위치에 배치
for (let y = 0; y < GRID_HEIGHT; y++) {
    for (let x = 0; x < GRID_WIDTH; x++) {
        if (canPlace(item, x, y)) return { x, y };
    }
}
```

---

### 2. 속성 시너지 시스템

#### 시너지 발동 조건
- 같은 속성의 유물을 **상하좌우 인접** 배치
- 최소 2개 이상 연결 시 활성화
- 활성화된 유물은 **하얀 테두리 효과** 표시

#### 시너지 종류

| 속성 | 시너지 이름 | 최소 개수 | 효과 | 전략적 활용 |
|:---:|:---:|:---:|:---|:---|
| 🔥 **Fire** | 화염의 시너지 | 2개 | 공격력 **+20%** | 고화력 타워 집중 배치로 보스 킬러 구성 |
| ❄️ **Ice** | 혹한의 시너지 | 2개 | 디버프 효율 **+25%** | 둔화 효과 극대화로 적 진격 차단 |
| ⚡ **Thunder** | 전격의 시너지 | 2개 | 공격 속도 **+30%** | 연사형 타워와 조합하여 DPS 폭증 |
| 🌿 **Leaf** | 생명의 시너지 | 2개 | 사거리 **+15%** | 넓은 범위 커버로 안정적인 방어선 |
| 💎 **Gem** | 보석의 시너지 | 2개 | 치명타 확률 **+10%** | 확률 기반 폭발 데미지 (2배) |

#### 시너지 계산 알고리즘
- **인접성 검사**: BFS 기반 연결 그래프 탐색
- **실시간 업데이트**: 유물 배치/제거 시 즉시 재계산
- **시각적 피드백**: 활성화된 유물에 흰색 테두리 렌더링

---

### 3. 전투 시스템

#### 공격 타입 (7종)

| 타입 | 설명 | 특징 | 대표 유물 |
|:---:|:---|:---|:---|
| **Normal** | 단일 표적 투사체 | 균형잡힌 기본 공격 | 화염의 비사, 선령의 활 |
| **Rapid** | 고속 연사 | 낮은 데미지, 빠른 공격 속도<br>버스트 모드 (6~10발) | 뇌광의 세이버, 폭풍의 쐐기 |
| **Laser** | 지속 빔 공격 | 끊김없는 피해, 긴 사거리 | 태양의 창, 심연의 광선 |
| **Nova** | 근거리 AoE | 타워 중심 원형 파동<br>주변 모든 적 동시 공격 | 혹한의 파동 |
| **Bomb** | 원거리 폭격 | 투사체 + 착탄 폭발<br>광역 피해 | 대지의 폭발 |
| **Multi** | 다중 발사 | 한 번에 여러 발 (3발)<br>다수의 적 동시 제압 | 혼돈의 구슬 |
| **Chain** | 연쇄 공격 | 적중 시 주변 적에게 튕김<br>최대 2~3회 연쇄 | 심판의 프리즘, 마비의 지팡이 |

#### 전투 메커니즘
- **자동 타겟팅**: 사거리 내 가장 가까운 적 우선
- **실시간 전투**: 60 FPS 업데이트
- **시각 효과**: 속성별 고유 이펙트 (파티클, 빔, 폭발)
- **피해 표시**: 크리티컬 히트 시 빨간색 텍스트

#### 치명타 시스템
- **기본 확률**: 0%
- **보석 시너지**: +10% (최대 10%)
- **피해량**: 기본 데미지의 **2배**
- **시각 효과**: "CRIT!" 텍스트 + 빨간색 데미지

---

### 4. 디버프 시스템

#### 디버프 종류

| 디버프 | 효과 | 지속 시간 | 적용 유물 |
|:---:|:---|:---:|:---|
| **Poison** | 초당 5 피해 (DoT) | 4초 | 맹독 포자 |
| **Slow** | 이동 속도 40% 감소 | 2.5초 | 서리 파편 |
| **Stun** | 이동 정지 (50% 확률) | 0.8초 | 마비의 지팡이 |
| **Vulnerable** | 받는 피해 50% 증가 | 3초 | 공허의 눈 |

#### 디버프 효율
- **기본 효율**: 100%
- **혹한 시너지**: +25% (Ice 속성 유물)
- **중첩**: 같은 디버프 재적용 시 지속시간 갱신

---

### 5. 유물 시스템

#### 유물 등급

##### 석판 (Tablet)
- **역할**: 버프 제공, 공간 채우기
- **공격 능력**: 없음
- **버프 효과**: 인접 아티팩트 공격력 5~10% 증가
- **형태**: 1~2칸

| 이름 | 형태 | 버프 |
|:---|:---:|:---|
| 기초 석판 | 1×1 | 공격력 +5% |
| 도미노 석판 | 1×2 | 공격력 +10% |
| 와이드 석판 | 2×1 | 공격력 +10% |

##### 아티팩트 (Artifact)
- **역할**: 실제 공격 수행
- **형태**: 1~3칸
- **속성**: Fire, Ice, Thunder, Leaf, Gem
- **스탯**: 공격력, 사거리, 공격속도

---

## 📚 유물 도감

### 🔥 Fire (화염)

| 유물 | 형태 | 공격 타입 | 공격력 | 사거리 | 공속 | 특수 능력 |
|:---|:---:|:---:|:---:|:---:|:---:|:---|
| **화염의 비사** | 2×1 | Normal | 45 | 280 | 1200ms | - |
| **태양의 창** | 3×1 | Laser | 8 | 450 | 50ms | 지속 빔 |
| **혼돈의 구슬** | 2×2 | Multi | 15 | 300 | 1000ms | 3발 동시 발사 |

### ❄️ Ice (얼음)

| 유물 | 형태 | 공격 타입 | 공격력 | 사거리 | 공속 | 특수 능력 |
|:---|:---:|:---:|:---:|:---:|:---:|:---|
| **혹한의 파동** | 2×1 | Nova | 25 | 220 | 1500ms | AoE 100 반경 |
| **서리 파편** | 1×1 | Normal | 12 | 220 | 1100ms | 둔화 60% (2.5초) |

### ⚡ Thunder (번개)

| 유물 | 형태 | 공격 타입 | 공격력 | 사거리 | 공속 | 특수 능력 |
|:---|:---:|:---:|:---:|:---:|:---:|:---|
| **뇌광의 세이버** | 1×2 | Rapid | 12 | 250 | 80ms | 6발 버스트 (재장전 1.2초) |
| **폭풍의 쐐기** | 2×2 | Rapid | 22 | 300 | 100ms | 10발 버스트 (재장전 1.8초) |
| **마비의 지팡이** | 1×2 | Chain | 8 | 300 | 1500ms | 2회 연쇄, 스턴 50% |

### 🌿 Leaf (자연)

| 유물 | 형태 | 공격 타입 | 공격력 | 사거리 | 공속 | 특수 능력 |
|:---|:---:|:---:|:---:|:---:|:---:|:---|
| **선령의 활** | 1×3 | Normal | 20 | 400 | 800ms | 장거리 저격 |
| **대지의 폭발** | 2×2 | Bomb | 35 | 250 | 2000ms | AoE 150 반경 |
| **맹독 포자** | 2×2 | Normal | 10 | 250 | 900ms | 독 5/초 (4초) |

### 💎 Gem (보석)

| 유물 | 형태 | 공격 타입 | 공격력 | 사거리 | 공속 | 특수 능력 |
|:---|:---:|:---:|:---:|:---:|:---:|:---|
| **심연의 광선** | 2×2 | Laser | 15 | 500 | 30ms | 초장거리 빔 |
| **심판의 프리즘** | 2×2 | Chain | 18 | 350 | 1200ms | 3회 연쇄 |
| **공허의 눈** | 2×2 | Laser | 15 | 450 | 2000ms | 취약 50% (3초) |

---

## � 몬스터 정보

### 몬스터 타입

| 타입 | 체력 | 이동 속도 | 크기 | 출현 확률 | 특징 |
|:---:|:---:|:---:|:---:|:---:|:---|
| **슬라임** | 80 | 보통 (0.001) | 40px | 40% | 기본형 몬스터 |
| **영혼** | 120 | 빠름 (0.0012) | 30px | 30% | 낮은 체력, 빠른 속도 |
| **가디언** | 300 | 느림 (0.0004) | 55px | 20% | 탱커형 |
| **골렘** | 600 | 매우 느림 (0.0002) | 70px | 10% | 보스급 체력 |

### 난이도 증가
- **체력 스케일링**: 시간 경과에 따라 점진적 증가
- **스폰 속도**: 난이도가 높아질수록 빠른 스폰
- **위험도 표시**: UI에 실시간 난이도 레벨 표시

---

## �🕹️ 조작법

### 기본 조작

| 입력 | 동작 | 설명 |
|:---|:---|:---|
| **좌클릭 (상점)** | 유물 구매 | 자동으로 빈 공간에 배치 |
| **좌클릭 드래그 (그리드)** | 유물 이동 | 배치된 유물 위치 변경 |
| **우클릭 (그리드)** | 유물 판매 | 유물 제거 및 자원 회수 |
| **R 키** | 유물 회전 | 90도 회전 (형태에 따라 제한) |
| **마우스 오버** | 정보 표시 | 유물 상세 스탯 및 설명 확인 |

### UI 정보

#### 좌측 패널
- **시너지 정보**: 활성화된 시너지 목록
- **수비 본부 정보**:
  - 전술력 (총 공격력)
  - 연사 보너스
  - 배치된 유물 수
  - 현재 몬스터 수
  - 위험도 레벨

#### 우측 패널
- **아이템 생성**: 속성별 필터링된 상점
- **태그 필터**: 속성별 유물 분류

---

## 🛠️ 기술 스택

### 프론트엔드
- **Phaser 3.60.0** - HTML5 게임 엔진
- **Vanilla JavaScript (ES6+)** - 모듈화된 아키텍처
- **HTML5 Canvas** - 2D 렌더링
- **CSS3** - UI 스타일링

### 아키텍처

#### 모듈 구조
```
js/
├── main.js                 # 진입점, Phaser 설정
├── scene.js                # 메인 게임 씬
├── constants.js            # 게임 상수 정의
├── items.js                # 유물 데이터베이스
└── systems/
    ├── GridSystem.js       # 그리드 관리 & 시너지 계산
    ├── TowerSystem.js      # 전투 로직 & 공격 타입
    ├── EnemySystem.js      # 몬스터 스폰 & AI
    ├── UIManager.js        # DOM 기반 UI 업데이트
    └── InputSystem.js      # 입력 처리 & 카메라
```

#### 주요 시스템

##### GridSystem.js
- **그리드 상태 관리**: 2D 배열 기반 충돌 검사
- **배치 검증**: `canPlace()` 알고리즘
- **시너지 계산**: BFS 기반 인접성 검사
- **절차적 렌더링**: 속성별 고유 디자인 생성
- **회전 로직**: 형태 변환 및 재검증

##### TowerSystem.js
- **전투 루프**: 60 FPS 업데이트
- **타겟팅**: 거리 기반 우선순위
- **공격 타입 구현**:
  - `fireProjectile()` - 투사체 물리
  - `fireLaser()` - 지속 빔
  - `fireNova()` - 원형 AoE
  - `fireBomb()` - 폭발 광역
  - `fireChain()` - 연쇄 타격
- **디버프 적용**: 효율 계산 및 지속시간 관리
- **치명타 계산**: 확률 기반 데미지 증폭

##### EnemySystem.js
- **몬스터 풀링**: 성능 최적화
- **경로 탐색**: 웨이포인트 기반 이동
- **체력 바**: 실시간 HP 표시
- **스폰 로직**: 난이도 기반 조절

##### UIManager.js
- **HTML DOM 동기화**: 게임 상태 → UI
- **상점 렌더링**: 속성별 필터링
- **툴팁 시스템**: 마우스 오버 정보
- **HUD 업데이트**: 실시간 통계

---

## 🎨 디자인 철학

### 절차적 그래픽
- 각 유물은 속성과 형태에 따라 **고유한 디자인** 자동 생성
- 베벨 효과, 코어 디자인, 속성별 심볼
- 시너지 활성화 시 **하얀 테두리** 효과

### 색상 테마
```javascript
ELEMENT_COLORS = {
    fire: 0xef4444,      // 빨강
    ice: 0x3b82f6,       // 파랑
    thunder: 0xfacc15,   // 노랑
    leaf: 0x10b981,      // 초록
    gem: 0xd8b4fe,       // 보라
    tablet: 0x64748b     // 회색
}
```

### UI/UX
- **다크 모드**: 눈의 피로 감소
- **픽셀 폰트**: 레트로 감성
- **실시간 피드백**: 모든 액션에 즉각적인 시각 효과

---

## 🚀 로컬 실행

### 요구사항
- 웹 브라우저 (Chrome, Firefox, Edge 등)
- 로컬 HTTP 서버

### 실행 방법

```bash
# 1. 저장소 클론
git clone https://github.com/netter36/RelicDefense.git
cd RelicDefense

# 2. HTTP 서버 실행 (Python)
python -m http.server 8000

# 또는 Node.js
npx http-server -p 8000

# 3. 브라우저에서 열기
# http://localhost:8000
```

---

## � 게임 밸런스

### 경제 시스템
- **초기 자원**: 100 골드
- **유물 가격**: 등급 및 성능에 따라 차등
- **판매 가격**: 구매가의 70% 환불

### 난이도 곡선
- **초반 (0~5분)**: 튜토리얼 수준, 기본 배치 학습
- **중반 (5~15분)**: 시너지 구축, 전략 수립
- **후반 (15분~)**: 최적화 필요, 고난이도 웨이브

### 밸런싱 철학
- **다양성**: 모든 속성과 공격 타입이 유용하도록 설계
- **시너지 중요성**: 단순 배치보다 전략적 조합이 강력
- **트레이드오프**: 공간 vs 화력, 사거리 vs 공속

---

## �📝 개발 로드맵

### 완료된 기능 ✅
- [x] 그리드 시스템 및 배치 로직
- [x] 7가지 공격 타입 구현
- [x] 속성 시너지 시스템
- [x] 4종 몬스터 타입
- [x] 디버프 시스템
- [x] 치명타 시스템
- [x] 절차적 그래픽 렌더링
- [x] UI/UX 완성

### 향후 계획 🔮
- [ ] 웨이브 시스템 개선
- [ ] 보스 몬스터 추가
- [ ] 업그레이드 시스템
- [ ] 세이브/로드 기능
- [ ] 도전 과제 시스템
- [ ] 사운드 & 음악

---

## 📄 라이선스

MIT License - 자유롭게 사용, 수정, 배포 가능

---

## 🎮 지금 플레이하기!

**[https://netter36.github.io/RelicDefense/](https://netter36.github.io/RelicDefense/)**

---

## 🤝 기여

버그 리포트, 기능 제안, PR 환영합니다!

1. Fork the Project
2. Create your Feature Branch (`git checkout -b feature/AmazingFeature`)
3. Commit your Changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the Branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

---

## 📧 문의

프로젝트 링크: [https://github.com/netter36/RelicDefense](https://github.com/netter36/RelicDefense)

---

*Created with ❤️ for strategy game enthusiasts*

**Made with Phaser 3 | Powered by JavaScript**
